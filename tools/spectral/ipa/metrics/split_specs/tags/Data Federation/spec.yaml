openapi: 3.0.1
paths:
    /api/atlas/v2/groups/{groupId}/dataFederation:
        get:
            description: Returns the details of all federated database instances in the specified project. To use this resource, the requesting API Key must have the Project Read Only or higher role.
            operationId: listFederatedDatabases
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/pretty'
                - $ref: '#/components/parameters/groupId'
                - description: Type of Federated Database Instances to return.
                  in: query
                  name: type
                  schema:
                    default: USER
                    enum:
                        - USER
                        - ONLINE_ARCHIVE
                    type: string
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                items:
                                    $ref: '#/components/schemas/DataLakeTenant'
                                type: array
                            x-xgen-version: "2023-01-01"
                    description: OK
                "401":
                    $ref: '#/components/responses/unauthorized'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return All Federated Database Instances in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        post:
            description: Creates one federated database instance in the specified project. To use this resource, the requesting API Key must have the Project Owner or Project Charts Admin roles.
            operationId: createFederatedDatabase
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/pretty'
                - $ref: '#/components/parameters/groupId'
                - description: Flag that indicates whether this request should check if the requesting IAM role can read from the S3 bucket. AWS checks if the role can list the objects in the bucket before writing to it. Some IAM roles only need write permissions. This flag allows you to skip that check.
                  in: query
                  name: skipRoleValidation
                  schema:
                    default: false
                    type: boolean
            requestBody:
                content:
                    application/vnd.atlas.2023-01-01+json:
                        schema:
                            $ref: '#/components/schemas/DataLakeTenant'
                description: Details to create one federated database instance in the specified project.
                required: true
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/DataLakeTenant'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Create One Federated Database Instance in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
    /api/atlas/v2/groups/{groupId}/dataFederation/{tenantName}:
        delete:
            description: Removes one federated database instance from the specified project. To use this resource, the requesting API Key must have the Project Owner or Project Charts Admin roles.
            operationId: deleteFederatedDatabase
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - $ref: '#/components/parameters/pretty'
                - description: Human-readable label that identifies the federated database instance to remove.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
            responses:
                "204":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/NoBody'
                            x-xgen-version: "2023-01-01"
                    description: This endpoint does not return a response body.
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Remove One Federated Database Instance from One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        get:
            description: Returns the details of one federated database instance within the specified project. To use this resource, the requesting API Key must have the Project Read Only or Project Charts Admin roles.
            operationId: getFederatedDatabase
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the Federated Database to return.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/DataLakeTenant'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return One Federated Database Instance in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        patch:
            description: Updates the details of one federated database instance in the specified project. To use this resource, the requesting API Key must have the Project Owner or higher role.
            operationId: updateFederatedDatabase
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/pretty'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the federated database instance to update.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
                - description: Flag that indicates whether this request should check if the requesting IAM role can read from the S3 bucket. AWS checks if the role can list the objects in the bucket before writing to it. Some IAM roles only need write permissions. This flag allows you to skip that check.
                  in: query
                  name: skipRoleValidation
                  required: true
                  schema:
                    type: boolean
            requestBody:
                content:
                    application/vnd.atlas.2023-01-01+json:
                        schema:
                            $ref: '#/components/schemas/DataLakeTenant'
                description: Details of one Federated Database to update in the specified project.
                required: true
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/DataLakeTenant'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Update One Federated Database Instance in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
    /api/atlas/v2/groups/{groupId}/dataFederation/{tenantName}/limits:
        get:
            description: Returns query limits for a federated databases instance in the specified project. To use this resource, the requesting API Key must have the Project Read Only role.
            operationId: returnFederatedDatabaseQueryLimits
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/pretty'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the federated database instance for which you want to retrieve query limits.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                items:
                                    $ref: '#/components/schemas/DataFederationTenantQueryLimit'
                                type: array
                            x-xgen-version: "2023-01-01"
                    description: OK
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return All Query Limits for One Federated Database Instance
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
    /api/atlas/v2/groups/{groupId}/dataFederation/{tenantName}/limits/{limitName}:
        delete:
            description: Deletes one query limit for one federated database instance. To use this resource, the requesting API Key must have the Project Owner role.
            operationId: deleteOneDataFederationInstanceQueryLimit
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the federated database instance to which the query limit applies.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
                - description: |
                    Human-readable label that identifies this data federation instance limit.

                    | Limit Name | Description | Default |
                    | --- | --- | --- |
                    | bytesProcessed.query | Limit on the number of bytes processed during a single data federation query | N/A |
                    | bytesProcessed.daily | Limit on the number of bytes processed for the data federation instance for the current day | N/A |
                    | bytesProcessed.weekly | Limit on the number of bytes processed for the data federation instance for the current week | N/A |
                    | bytesProcessed.monthly | Limit on the number of bytes processed for the data federation instance for the current month | N/A |
                  in: path
                  name: limitName
                  required: true
                  schema:
                    enum:
                        - bytesProcessed.query
                        - bytesProcessed.daily
                        - bytesProcessed.weekly
                        - bytesProcessed.monthly
                    type: string
                    x-xgen-IPA-exception:
                        xgen-IPA-123-enum-values-must-be-upper-snake-case: Schema predates IPA validation
            responses:
                "204":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/NoBody'
                            x-xgen-version: "2023-01-01"
                    description: This endpoint does not return a response body.
                "400":
                    $ref: '#/components/responses/badRequest'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Delete One Query Limit For One Federated Database Instance
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        get:
            description: Returns the details of one query limit for the specified federated database instance in the specified project. To use this resource, the requesting API Key must have the Project Read Only role.
            operationId: returnFederatedDatabaseQueryLimit
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/pretty'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the federated database instance to which the query limit applies.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
                - description: |
                    Human-readable label that identifies this data federation instance limit.

                    | Limit Name | Description | Default |
                    | --- | --- | --- |
                    | bytesProcessed.query | Limit on the number of bytes processed during a single data federation query | N/A |
                    | bytesProcessed.daily | Limit on the number of bytes processed for the data federation instance for the current day | N/A |
                    | bytesProcessed.weekly | Limit on the number of bytes processed for the data federation instance for the current week | N/A |
                    | bytesProcessed.monthly | Limit on the number of bytes processed for the data federation instance for the current month | N/A |
                  in: path
                  name: limitName
                  required: true
                  schema:
                    enum:
                        - bytesProcessed.query
                        - bytesProcessed.daily
                        - bytesProcessed.weekly
                        - bytesProcessed.monthly
                    type: string
                    x-xgen-IPA-exception:
                        xgen-IPA-123-enum-values-must-be-upper-snake-case: Schema predates IPA validation
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/DataFederationTenantQueryLimit'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "401":
                    $ref: '#/components/responses/unauthorized'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return One Federated Database Instance Query Limit for One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        patch:
            description: Creates or updates one query limit for one federated database instance. To use this resource, the requesting API Key must have the Project Owner role.
            operationId: createOneDataFederationQueryLimit
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - description: Human-readable label that identifies the federated database instance to which the query limit applies.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
                - description: |
                    Human-readable label that identifies this data federation instance limit.

                    | Limit Name | Description | Default |
                    | --- | --- | --- |
                    | bytesProcessed.query | Limit on the number of bytes processed during a single data federation query | N/A |
                    | bytesProcessed.daily | Limit on the number of bytes processed for the data federation instance for the current day | N/A |
                    | bytesProcessed.weekly | Limit on the number of bytes processed for the data federation instance for the current week | N/A |
                    | bytesProcessed.monthly | Limit on the number of bytes processed for the data federation instance for the current month | N/A |
                  in: path
                  name: limitName
                  required: true
                  schema:
                    enum:
                        - bytesProcessed.query
                        - bytesProcessed.daily
                        - bytesProcessed.weekly
                        - bytesProcessed.monthly
                    type: string
                    x-xgen-IPA-exception:
                        xgen-IPA-123-enum-values-must-be-upper-snake-case: Schema predates IPA validation
            requestBody:
                content:
                    application/vnd.atlas.2023-01-01+json:
                        schema:
                            $ref: '#/components/schemas/DataFederationTenantQueryLimit'
                description: Creates or updates one query limit for one federated database instance.
                required: true
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/DataFederationTenantQueryLimit'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Configure One Query Limit for One Federated Database Instance
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
    /api/atlas/v2/groups/{groupId}/dataFederation/{tenantName}/queryLogs.gz:
        get:
            description: 'Downloads the query logs for the specified federated database instance. To use this resource, the requesting API Key must have the Project Owner or Project Data Access Read Write roles. The API does not support direct calls with the json response schema. You must request a gzip response schema using an accept header of the format: "Accept: application/vnd.atlas.YYYY-MM-DD+gzip".'
            operationId: downloadFederatedDatabaseQueryLogs
            parameters:
                - $ref: '#/components/parameters/groupId'
                - description: Timestamp that specifies the end point for the range of log messages to download.  MongoDB Cloud expresses this timestamp in the number of seconds that have elapsed since the UNIX epoch.
                  in: query
                  name: endDate
                  schema:
                    example: 1.636481348e+09
                    format: int64
                    pattern: "1199145600"
                    type: integer
                - description: Timestamp that specifies the starting point for the range of log messages to download. MongoDB Cloud expresses this timestamp in the number of seconds that have elapsed since the UNIX epoch.
                  in: query
                  name: startDate
                  schema:
                    example: 1.636466948e+09
                    format: int64
                    pattern: "1199145600"
                    type: integer
                - description: Human-readable label that identifies the federated database instance for which you want to download query logs.
                  in: path
                  name: tenantName
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+gzip:
                            schema:
                                description: Compressed archive labeled `queryLogs.gz` downloads
                                format: binary
                                type: string
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "403":
                    $ref: '#/components/responses/forbidden'
                "404":
                    $ref: '#/components/responses/notFound'
                "409":
                    $ref: '#/components/responses/conflict'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Download Query Logs for One Federated Database Instance
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
    /api/atlas/v2/groups/{groupId}/privateNetworkSettings/endpointIds:
        get:
            description: Returns all private endpoints for Federated Database Instances and Online Archives in the specified project. To use this resource, the requesting API Key must have the Project Read Only or Project Charts Admin roles.
            operationId: listDataFederationPrivateEndpoints
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - $ref: '#/components/parameters/includeCount'
                - $ref: '#/components/parameters/itemsPerPage'
                - $ref: '#/components/parameters/pageNum'
                - $ref: '#/components/parameters/pretty'
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/PaginatedPrivateNetworkEndpointIdEntryView'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return All Federated Database Instance and Online Archive Private Endpoints in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        post:
            description: |-
                Adds one private endpoint for Federated Database Instances and Online Archives to the specified projects. If the endpoint ID already exists and the associated comment is unchanged, Atlas Data Federation makes no change to the endpoint ID list. If the endpoint ID already exists and the associated comment is changed, Atlas Data Federation updates the comment value only in the endpoint ID list. If the endpoint ID doesn't exist, Atlas Data Federation appends the new endpoint to the list of endpoints in the endpoint ID list. Each region has an associated service name for the various endpoints in each region.

                 `us-east-1` is `com.amazonaws.vpce.us-east-1.vpce-svc-00e311695874992b4`.

                 `us-west-1` is `com.amazonaws.vpce.us-west-2.vpce-svc-09d86b19e59d1b4bb`.

                 `eu-west-1` is `com.amazonaws.vpce.eu-west-1.vpce-svc-0824460b72e1a420e`.

                 `eu-west-2` is `com.amazonaws.vpce.eu-west-2.vpce-svc-052f1840aa0c4f1f9`.

                 `eu-central-1` is `com.amazonaws.vpce.eu-central-1.vpce-svc-0ac8ce91871138c0d`.

                 `sa-east-1` is `com.amazonaws.vpce.sa-east-1.vpce-svc-0b56e75e8cdf50044`.

                 `ap-southeast-2` is `com.amazonaws.vpce.ap-southeast-2.vpce-svc-036f1de74d761706e`.

                 `ap-south-1` is `com.amazonaws.vpce.ap-south-1.vpce-svc-03eb8a541f96d356d`.

                 To use this resource, the requesting API Key must have the Project Owner or Project Charts Admin roles.
            operationId: createDataFederationPrivateEndpoint
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - $ref: '#/components/parameters/pretty'
            requestBody:
                content:
                    application/vnd.atlas.2023-01-01+json:
                        schema:
                            $ref: '#/components/schemas/PrivateNetworkEndpointIdEntry'
                description: Private endpoint for Federated Database Instances and Online Archives to add to the specified project.
                required: true
            responses:
                "201":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/PaginatedPrivateNetworkEndpointIdEntryView'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Create One Federated Database Instance and Online Archive Private Endpoint for One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        x-xgen-IPA-exception:
            xgen-IPA-102-path-alternate-resource-name-path-param: API predates IPA validation
    /api/atlas/v2/groups/{groupId}/privateNetworkSettings/endpointIds/{endpointId}:
        delete:
            description: Removes one private endpoint for Federated Database Instances and Online Archives in the specified project. To use this resource, the requesting API Key must have the Project Owner role.
            operationId: deleteDataFederationPrivateEndpoint
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - $ref: '#/components/parameters/pretty'
                - description: Unique 22-character alphanumeric string that identifies the private endpoint to remove. Atlas Data Federation supports AWS private endpoints using the AWS PrivateLink feature.
                  in: path
                  name: endpointId
                  required: true
                  schema:
                    maxLength: 22
                    minLength: 22
                    pattern: ^vpce-[0-9a-f]{17}$
                    type: string
            responses:
                "204":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/NoBody'
                            x-xgen-version: "2023-01-01"
                    description: This endpoint does not return a response body.
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Remove One Federated Database Instance and Online Archive Private Endpoint from One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        get:
            description: Returns the specified private endpoint for Federated Database Instances or Online Archives in the specified project. To use this resource, the requesting API Key must have the Project Read Only or Project Charts Admin roles.
            operationId: getDataFederationPrivateEndpoint
            parameters:
                - $ref: '#/components/parameters/envelope'
                - $ref: '#/components/parameters/groupId'
                - $ref: '#/components/parameters/pretty'
                - description: Unique 22-character alphanumeric string that identifies the private endpoint to return. Atlas Data Federation supports AWS private endpoints using the AWS PrivateLink feature.
                  in: path
                  name: endpointId
                  required: true
                  schema:
                    maxLength: 22
                    minLength: 22
                    pattern: ^vpce-[0-9a-f]{17}$
                    type: string
            responses:
                "200":
                    content:
                        application/vnd.atlas.2023-01-01+json:
                            schema:
                                $ref: '#/components/schemas/PrivateNetworkEndpointIdEntry'
                            x-xgen-version: "2023-01-01"
                    description: OK
                "400":
                    $ref: '#/components/responses/badRequest'
                "401":
                    $ref: '#/components/responses/unauthorized'
                "404":
                    $ref: '#/components/responses/notFound'
                "500":
                    $ref: '#/components/responses/internalServerError'
            summary: Return One Federated Database Instance and Online Archive Private Endpoint in One Project
            tags:
                - Data Federation
            x-xgen-owner-team: Atlas Online Archive II
        x-xgen-IPA-exception:
            xgen-IPA-102-path-alternate-resource-name-path-param: API predates IPA validation

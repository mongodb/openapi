# IPA-121: Datetime
# http://go/ipa/121

functions:
  - IPA121DateTimeFieldsMentionISO8601

rules:
  xgen-IPA-121-date-time-fields-mention-iso-8601:
    description: |
      Fields with format="date-time" should mention ISO 8601 in their description.
    message: '{{error}} https://mdb.link/mongodb-atlas-openapi-validation#xgen-IPA-121-date-time-fields-mention-iso-8601'
    given:
      - $.paths..parameters[*].schema
      - $.components.parameters.*.schema
      - $.components.schemas..properties[*]
      - $.paths..requestBody..schema..properties[*]
      - $.paths..responses..schema..properties[*]
    severity: warn
    then:
      function: IPA121DateTimeFieldsMentionISO8601

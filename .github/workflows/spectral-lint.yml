name: Spectral Lint Commited OpenAPI Spec

# Trigger the workflow on pull requests and pushes to the main branch
on:
  pull_request:
  push:
    branches:
      - main

jobs:
  spectral-lint:
    runs-on: ubuntu-latest
    
    steps:
      # Checkout the code
      - name: Checkout repository
        uses: actions/checkout@692973e3d937129bcbf40652eb9f2f61becf3332

      - name: Run 
        id: spectral-validation
        env:
          SPECTRAL_VERSION: ${{ vars.SPECTRAL_VERSION }}
        working-directory: tools/spectral
        run: make linterr
